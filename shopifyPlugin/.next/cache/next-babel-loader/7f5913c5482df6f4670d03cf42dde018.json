{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Card, Form, FormLayout, Frame, Layout, Page, Subheading, TextStyle, TextField, Toast } from '@shopify/polaris';\nimport store from 'store-js';\nimport axios from 'axios';\nimport { Redirect } from '@shopify/app-bridge/actions';\nimport { Context } from '@shopify/app-bridge-react';\n\nvar EditProduct = /*#__PURE__*/function (_React$Component) {\n  _inherits(EditProduct, _React$Component);\n\n  var _super = _createSuper(EditProduct);\n\n  function EditProduct() {\n    var _this;\n\n    _classCallCheck(this, EditProduct);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      businessName: '',\n      streetAddress: '',\n      city: '',\n      zipCode: '',\n      state: '',\n      merchantDescription: '',\n      email: '{{Auto-Generated Link}}',\n      errorCheck: false,\n      primaryLoad: false,\n      secondaryLoad: false,\n      showToast: false,\n      status: true\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (field) {\n      return function (value) {\n        return _this.setState(_defineProperty({}, field, value));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function _callee(product) {\n      var _this$state, businessName, streetAddress, city, zipCode, state, merchantDescription, email;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                errorCheck: true\n              });\n\n              _this$state = _this.state, businessName = _this$state.businessName, streetAddress = _this$state.streetAddress, city = _this$state.city, zipCode = _this$state.zipCode, state = _this$state.state, merchantDescription = _this$state.merchantDescription, email = _this$state.email;\n              businessName = businessName.trim();\n              streetAddress = streetAddress.trim();\n              merchantDescription = merchantDescription.trim();\n              city = city.trim();\n              state = state.trim();\n\n              if (businessName.length && streetAddress.length && city.length && state.length && merchantDescription.length && zipCode && email.length && email.includes(\"{{Auto-Generated Link}}\")) {\n                axios.post('/api/map', {\n                  streetAddress: streetAddress,\n                  city: city,\n                  zipCode: zipCode,\n                  state: state\n                }).then(function (res) {\n                  console.log(res); // let { lat, lng } = await getCoords(streetAddress, city, zipCode, state)\n                  // if (!lat && !lng) {\n                  //    alert(\"Address did not return a lat/lng. Please edit the addess format.\");\n                  //    return\n                  // }\n                })[\"catch\"](function (err) {\n                  console.log(err);\n                  alert(\"Address did not return a lat/lng. Please edit the addess format.\");\n                  return;\n                }); // let updatedProduct = { ...product, businessName, streetAddress, merchantDescription, city, state, zipCode, email, coords: { lat, lng } }\n                // this.setState({ primaryLoad: true });\n                // axios.put('/api/products', { product: updatedProduct })\n                //    .then(res => {\n                //       this.setState({ showToast: true, status: true })\n                //       let redirect = Redirect.create(this.context)\n                //       redirect.dispatch(Redirect.Action.APP, '/index')\n                //    }).catch(err => {\n                //       this.setState({ showToast: true, status: false, primaryLoad: false })\n                //    })\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n\n    return _this;\n  }\n\n  _createClass(EditProduct, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var product = store.get('product');\n      this.setState({\n        businessName: product.businessName ? product.businessName : '',\n        streetAddress: product.streetAddress ? product.streetAddress : '',\n        city: product.city ? product.city : '',\n        zipCode: product.zipCode ? product.zipCode : '',\n        state: product.state ? product.state : '',\n        merchantDescription: product.merchantDescription ? product.merchantDescription : '',\n        email: product.email ? product.email : '{{Auto-Generated Link}}'\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this,\n          _jsx;\n\n      var app = this.context;\n      var _this$state2 = this.state,\n          errorCheck = _this$state2.errorCheck,\n          businessName = _this$state2.businessName,\n          streetAddress = _this$state2.streetAddress,\n          city = _this$state2.city,\n          zipCode = _this$state2.zipCode,\n          status = _this$state2.status,\n          state = _this$state2.state,\n          merchantDescription = _this$state2.merchantDescription,\n          email = _this$state2.email,\n          primaryLoad = _this$state2.primaryLoad,\n          secondaryLoad = _this$state2.secondaryLoad,\n          showToast = _this$state2.showToast;\n      businessName = businessName.trim();\n      streetAddress = streetAddress.trim();\n      email = email.trim();\n      merchantDescription = merchantDescription.trim();\n      city = city.trim();\n      state = state.trim();\n      var product = store.get('product');\n\n      var redirectToHome = function redirectToHome() {\n        _this2.setState({\n          secondaryLoad: true\n        });\n\n        var redirect = Redirect.create(app);\n        redirect.dispatch(Redirect.Action.APP, '/index');\n      };\n\n      return __jsx(Frame, null, __jsx(Page, null, __jsx(Frame, null, __jsx(Layout, null, __jsx(Layout.Section, null, showToast && __jsx(Toast, {\n        content: status ? \"Successfully uploaded.\" : \"Failed To Upload, Please Try Again.\",\n        onDismiss: function onDismiss() {\n          return _this2.setState({\n            showToast: false\n          });\n        }\n      }), __jsx(Form, {\n        preventDefault: true\n      }, __jsx(Card, {\n        sectioned: true,\n        title: \"Voucher Display Form: \".concat(product ? product.title : ''),\n        secondaryFooterActions: [{\n          content: 'Return To List',\n          onAction: function onAction() {\n            redirectToHome();\n          },\n          loading: secondaryLoad\n        }],\n        primaryFooterAction: {\n          content: 'Save',\n          onAction: function onAction() {\n            _this2.handleSubmit(product);\n          },\n          loading: primaryLoad\n        }\n      }, __jsx(TextStyle, {\n        variation: \"subdued\"\n      }, \"Fill in the data below for the merchant corresponding to this product.\"), \" \", __jsx(\"br\", null), __jsx(\"br\", null), __jsx(FormLayout, null, __jsx(TextField, {\n        autoFocus: true,\n        prefix: \"\",\n        value: this.state.businessName,\n        onChange: this.handleChange('businessName'),\n        label: \"Merchant's Name \\u2013 As displayed in Google Maps\",\n        type: \"text\",\n        placeholder: \"Bob's Burger Shack\",\n        maxLength: 150,\n        error: errorCheck && !businessName.length ? \"Merchant's name is required.\" : null\n      }), __jsx(TextField, {\n        error: errorCheck && !merchantDescription.length ? \"Merchant description is required.\" : null,\n        prefix: \"\",\n        value: this.state.merchantDescription,\n        onChange: this.handleChange('merchantDescription'),\n        label: \"Merchant Description\",\n        type: \"text\",\n        maxLength: 800,\n        showCharacterCount: true,\n        spellCheck: true,\n        multiline: true,\n        placeholder: \"Bob's Burger Shack is a gourmet dine-in restaurant located in the Financial District of Downtown Seattle. They're known for...\"\n      }), __jsx(TextField, {\n        error: errorCheck && !email.length ? \"Email to customer is required.\" : errorCheck && !email.includes(\"{{Auto-Generated Link}}\") ? \"Please include: {{Auto-Generated Link}}\" : null,\n        prefix: \"\",\n        value: this.state.email,\n        onChange: this.handleChange('email'),\n        label: \"Email\",\n        type: \"text\",\n        maxLength: 800,\n        showCharacterCount: true,\n        spellCheck: true,\n        multiline: true,\n        helpText: \"Server code will look for \\\"{{Auto-Generated Link}}\\\" to replace with email. PLACE IT ANYWHERE, BUT DO NOT DELETE IT!\",\n        placeholder: \"Thank you for your purchase! Your link is: {{Auto-Generated Link}}. Enjoy!\"\n      }), __jsx(Subheading, null, \"Address\"), __jsx(FormLayout.Group, {\n        condensed: true\n      }, __jsx(TextField, {\n        error: errorCheck && !streetAddress.length ? \"Street address is required.\" : null,\n        maxLength: 75,\n        prefix: \"\",\n        value: this.state.streetAddress,\n        onChange: this.handleChange('streetAddress'),\n        label: \"Street Address\",\n        type: \"text\",\n        placeholder: \"48185 Washington Blvd.\"\n      }), __jsx(TextField, (_jsx = {\n        error: errorCheck && !city.length ? \"City name is required.\" : null,\n        maxLength: 50,\n        prefix: \"\",\n        value: this.state.city,\n        onChange: this.handleChange('city'),\n        label: \"City\",\n        type: \"text\"\n      }, _defineProperty(_jsx, \"label\", \"City\"), _defineProperty(_jsx, \"placeholder\", \"Seattle\"), _jsx)), __jsx(TextField, {\n        error: errorCheck && !zipCode ? \"Zip code is required.\" : null,\n        maxLength: 5,\n        prefix: \"\",\n        label: \"Zip Code\",\n        value: this.state.zipCode,\n        onChange: this.handleChange('zipCode'),\n        placeholder: \"90210\",\n        type: \"number\"\n      }), __jsx(TextField, {\n        error: errorCheck && !state.length ? \"State is required.\" : null,\n        maxLength: 2,\n        prefix: \"\",\n        label: \"State\",\n        value: this.state.state,\n        onChange: this.handleChange('state'),\n        placeholder: \"WA\"\n      }))))))))));\n    }\n  }]);\n\n  return EditProduct;\n}(React.Component);\n\n_defineProperty(EditProduct, \"contextType\", Context);\n\nexport default EditProduct; // const UPDATE_PRICE = gql`\n//   mutation productVariantUpdate($input: ProductVariantInput!) {\n//     productVariantUpdate(input: $input) {\n//       product {\n//         title\n//       }\n//       productVariant {\n//         id\n//         price\n//       }\n//     }\n//   }\n// `;","map":{"version":3,"sources":["/Users/kjgarrett/Desktop/Deals/shopifyPlugin/pages/edit-products.js"],"names":["Card","Form","FormLayout","Frame","Layout","Page","Subheading","TextStyle","TextField","Toast","store","axios","Redirect","Context","EditProduct","businessName","streetAddress","city","zipCode","state","merchantDescription","email","errorCheck","primaryLoad","secondaryLoad","showToast","status","field","value","setState","product","trim","length","includes","post","then","res","console","log","err","alert","get","app","context","redirectToHome","redirect","create","dispatch","Action","APP","title","content","onAction","loading","handleSubmit","handleChange","React","Component"],"mappings":"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","sourcesContent":["import { Card, Form, FormLayout, Frame, Layout, Page, Subheading, TextStyle, TextField, Toast } from '@shopify/polaris';\nimport store from 'store-js';\nimport axios from 'axios';\nimport { Redirect } from '@shopify/app-bridge/actions';\nimport { Context } from '@shopify/app-bridge-react';\n\nclass EditProduct extends React.Component {\n   state = {\n      businessName: '',\n      streetAddress: '',\n      city: '',\n      zipCode: '',\n      state: '',\n      merchantDescription: '',\n      email: '{{Auto-Generated Link}}',\n      errorCheck: false,\n      primaryLoad: false,\n      secondaryLoad: false,\n      showToast: false,\n      status: true\n   };\n\n   static contextType = Context;\n\n   componentDidMount() {\n      let product = store.get('product')\n      this.setState({\n         businessName: product.businessName ? product.businessName : '',\n         streetAddress: product.streetAddress ? product.streetAddress : '',\n         city: product.city ? product.city : '',\n         zipCode: product.zipCode ? product.zipCode : '',\n         state: product.state ? product.state : '',\n         merchantDescription: product.merchantDescription ? product.merchantDescription : '',\n         email: product.email ? product.email : '{{Auto-Generated Link}}'\n      })\n   }\n\n   render() {\n      const app = this.context;\n      let { errorCheck, businessName, streetAddress, city, zipCode, status,\n         state, merchantDescription, email, primaryLoad, secondaryLoad, showToast } = this.state;\n      businessName = businessName.trim(); streetAddress = streetAddress.trim(); email = email.trim();\n      merchantDescription = merchantDescription.trim(); city = city.trim(); state = state.trim();\n      const product = store.get('product');\n      const redirectToHome = () => {\n         this.setState({ secondaryLoad: true })\n         const redirect = Redirect.create(app);\n         redirect.dispatch(Redirect.Action.APP, '/index');\n      }\n      return (\n         <Frame>\n            <Page>\n               <Frame>\n                  <Layout>\n                     <Layout.Section>\n                        {showToast && (\n                           <Toast content={status ? \"Successfully uploaded.\" : \"Failed To Upload, Please Try Again.\"}\n                              onDismiss={() => this.setState({ showToast: false })} />\n                        )}\n                        <Form preventDefault={true}>\n                           <Card sectioned title={`Voucher Display Form: ${product ? product.title : ''}`}\n                              secondaryFooterActions={[{ content: 'Return To List', onAction: () => { redirectToHome() }, loading: secondaryLoad }]}\n                              primaryFooterAction={{ content: 'Save', onAction: () => { this.handleSubmit(product) }, loading: primaryLoad }} >\n                              <TextStyle variation=\"subdued\">Fill in the data below for the merchant corresponding to this product.</TextStyle> <br /><br />\n                              <FormLayout>\n                                 <TextField autoFocus={true} prefix=\"\" value={this.state.businessName} onChange={this.handleChange('businessName')}\n                                    label=\"Merchant's Name – As displayed in Google Maps\" type=\"text\" placeholder=\"Bob's Burger Shack\" maxLength={150}\n                                    error={errorCheck && !businessName.length ? \"Merchant's name is required.\" : null} />\n                                 <TextField error={errorCheck && !merchantDescription.length ? \"Merchant description is required.\" : null} prefix=\"\" value={this.state.merchantDescription}\n                                    onChange={this.handleChange('merchantDescription')} label=\"Merchant Description\" type=\"text\" maxLength={800}\n                                    showCharacterCount={true} spellCheck={true} multiline={true}\n                                    placeholder=\"Bob's Burger Shack is a gourmet dine-in restaurant located in the Financial District of Downtown Seattle. They're known for...\" />\n                                 <TextField error={errorCheck && !email.length ? \"Email to customer is required.\" : errorCheck && !email.includes(\"{{Auto-Generated Link}}\") ? \"Please include: {{Auto-Generated Link}}\" : null} prefix=\"\" value={this.state.email}\n                                    onChange={this.handleChange('email')} label=\"Email\" type=\"text\" maxLength={800}\n                                    showCharacterCount={true} spellCheck={true} multiline={true} helpText={`Server code will look for \"{{Auto-Generated Link}}\" to replace with email. PLACE IT ANYWHERE, BUT DO NOT DELETE IT!`}\n                                    placeholder=\"Thank you for your purchase! Your link is: {{Auto-Generated Link}}. Enjoy!\" />\n                                 <Subheading>Address</Subheading>\n                                 <FormLayout.Group condensed>\n                                    <TextField error={errorCheck && !streetAddress.length ? \"Street address is required.\" : null} maxLength={75} prefix=\"\" value={this.state.streetAddress} onChange={this.handleChange('streetAddress')}\n                                       label=\"Street Address\" type=\"text\" placeholder=\"48185 Washington Blvd.\" />\n                                    <TextField error={errorCheck && !city.length ? \"City name is required.\" : null} maxLength={50} prefix=\"\" value={this.state.city} onChange={this.handleChange('city')}\n                                       label=\"City\" type=\"text\" label=\"City\" placeholder=\"Seattle\" />\n                                    <TextField error={errorCheck && !zipCode ? \"Zip code is required.\" : null} maxLength={5} prefix=\"\" label=\"Zip Code\" value={this.state.zipCode} onChange={this.handleChange('zipCode')}\n                                       placeholder=\"90210\" type=\"number\" />\n                                    <TextField error={errorCheck && !state.length ? \"State is required.\" : null} maxLength={2} prefix=\"\" label=\"State\" value={this.state.state} onChange={this.handleChange('state')}\n                                       placeholder=\"WA\" />\n                                 </FormLayout.Group>\n                              </FormLayout>\n                           </Card>\n                        </Form>\n                     </Layout.Section>\n                  </Layout>\n               </Frame>\n            </Page>\n         </Frame>\n      );\n   }\n\n   handleChange = (field) => {\n      return (value) => this.setState({ [field]: value });\n   }\n   handleSubmit = async (product) => {\n      this.setState({ errorCheck: true });\n      let { businessName, streetAddress, city, zipCode, state, merchantDescription, email } = this.state;\n      businessName = businessName.trim(); streetAddress = streetAddress.trim();\n      merchantDescription = merchantDescription.trim(); city = city.trim(); state = state.trim();\n      if (businessName.length && streetAddress.length && city.length &&\n         state.length && merchantDescription.length && zipCode &&\n         email.length && email.includes(\"{{Auto-Generated Link}}\")) {\n         axios.post('/api/map', { streetAddress, city, zipCode, state })\n            .then(res => {\n               console.log(res)\n               // let { lat, lng } = await getCoords(streetAddress, city, zipCode, state)\n               // if (!lat && !lng) {\n               //    alert(\"Address did not return a lat/lng. Please edit the addess format.\");\n               //    return\n               // }\n            })\n            .catch(err => {\n               console.log(err)\n               alert(\"Address did not return a lat/lng. Please edit the addess format.\");\n               return\n            })\n         // let updatedProduct = { ...product, businessName, streetAddress, merchantDescription, city, state, zipCode, email, coords: { lat, lng } }\n         // this.setState({ primaryLoad: true });\n         // axios.put('/api/products', { product: updatedProduct })\n         //    .then(res => {\n         //       this.setState({ showToast: true, status: true })\n         //       let redirect = Redirect.create(this.context)\n         //       redirect.dispatch(Redirect.Action.APP, '/index')\n         //    }).catch(err => {\n         //       this.setState({ showToast: true, status: false, primaryLoad: false })\n         //    })\n      }\n   }\n}\n\nexport default EditProduct;\n\n// const UPDATE_PRICE = gql`\n//   mutation productVariantUpdate($input: ProductVariantInput!) {\n//     productVariantUpdate(input: $input) {\n//       product {\n//         title\n//       }\n//       productVariant {\n//         id\n//         price\n//       }\n//     }\n//   }\n// `;\n"]},"metadata":{},"sourceType":"module"}