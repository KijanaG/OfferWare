{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{RNiq:function(t,e,r){\"use strict\";function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}r.r(e);var i=r(\"o0o1\"),s=r.n(i),o=r(\"1OyB\"),a=r(\"vuIU\"),u=r(\"JX7q\"),c=r(\"Ji7U\"),l=r(\"md7G\"),p=r(\"foSv\"),b=r(\"rePB\"),h=r(\"q1tI\"),d=r.n(h),f=r(\"6mVS\"),v=r(\"p7gN\"),y=r(\"vDqi\"),O=r.n(y),g=r(\"2GyB\"),m=r.n(g),j=r(\"lTCR\"),R=r.n(j),S=r(\"mrSG\"),_=r(\"lqOT\"),x=r(\"dMq0\"),P=r(\"qx2n\"),q=r(\"qVdT\"),w=function(){function t(t,e){this.isMounted=!1,this.previousOptions={},this.context={},this.options={},this.options=t||{},this.context=e||{}}return t.prototype.getOptions=function(){return this.options},t.prototype.setOptions=function(t,e){void 0===e&&(e=!1),e&&!Object(P.a)(this.options,t)&&(this.previousOptions=this.options),this.options=t},t.prototype.unmount=function(){this.isMounted=!1},t.prototype.refreshClient=function(){var t=this.options&&this.options.client||this.context&&this.context.client;Object(q.b)(!!t,2);var e=!1;return t!==this.client&&(e=!0,this.client=t,this.cleanup()),{client:this.client,isNew:e}},t.prototype.verifyDocumentType=function(t,e){var r=Object(_.e)(t);Object(_.d)(e),Object(_.d)(r.type);Object(q.b)(r.type===e,3)},t}(),D=function(t){function e(e){var r=e.options,n=e.context,i=e.onNewData,s=t.call(this,r,n)||this;return s.previousData={},s.currentObservable={},s.runLazy=!1,s.runLazyQuery=function(t){s.cleanup(),s.runLazy=!0,s.lazyOptions=t,s.onNewData()},s.getExecuteResult=function(){var t=s.getQueryResult();return s.startQuerySubscription(),t},s.obsRefetch=function(t){return s.currentObservable.query.refetch(t)},s.obsFetchMore=function(t){return s.currentObservable.query.fetchMore(t)},s.obsUpdateQuery=function(t){return s.currentObservable.query.updateQuery(t)},s.obsStartPolling=function(t){s.currentObservable&&s.currentObservable.query&&s.currentObservable.query.startPolling(t)},s.obsStopPolling=function(){s.currentObservable&&s.currentObservable.query&&s.currentObservable.query.stopPolling()},s.obsSubscribeToMore=function(t){return s.currentObservable.query.subscribeToMore(t)},s.onNewData=i,s}return Object(S.__extends)(e,t),e.prototype.execute=function(){this.refreshClient();var t=this.getOptions(),e=t.skip,r=t.query;return(e||r!==this.previousData.query)&&(this.removeQuerySubscription(),this.previousData.query=r),this.updateObservableQuery(),this.isMounted&&this.startQuerySubscription(),this.getExecuteSsrResult()||this.getExecuteResult()},e.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:x.b.ready,called:!1,data:void 0}]},e.prototype.fetchData=function(){var t=this.getOptions();if(t.skip||!1===t.ssr)return!1;var e=this.currentObservable.query;return!!e.getCurrentResult().loading&&e.result()},e.prototype.afterExecute=function(t){var e=(void 0===t?{}:t).lazy,r=void 0!==e&&e;return this.isMounted=!0,r&&!this.runLazy||this.handleErrorOrCompleted(),this.previousOptions=this.getOptions(),this.unmount.bind(this)},e.prototype.cleanup=function(){this.removeQuerySubscription(),delete this.currentObservable.query,delete this.previousData.result},e.prototype.getOptions=function(){var e=t.prototype.getOptions.call(this);return this.lazyOptions&&(e.variables=Object(S.__assign)(Object(S.__assign)({},e.variables),this.lazyOptions.variables),e.context=Object(S.__assign)(Object(S.__assign)({},e.context),this.lazyOptions.context)),this.runLazy&&delete e.skip,e},e.prototype.ssrInitiated=function(){return this.context&&this.context.renderPromises},e.prototype.getExecuteSsrResult=function(){var t,e=!1===this.getOptions().ssr,r=this.refreshClient().client.disableNetworkFetches,n=Object(S.__assign)({loading:!0,networkStatus:x.b.loading,called:!0,data:void 0,stale:!1,client:this.client},this.observableQueryFields());return e&&(this.ssrInitiated()||r)?(this.previousData.result=n,n):(this.ssrInitiated()&&(t=this.context.renderPromises.addQueryPromise(this,this.getExecuteResult)||n),t)},e.prototype.prepareObservableQueryOptions=function(){var t=this.getOptions();this.verifyDocumentType(t.query,_.b.Query);var e=t.displayName||\"Query\";return!this.ssrInitiated()||\"network-only\"!==t.fetchPolicy&&\"cache-and-network\"!==t.fetchPolicy||(t.fetchPolicy=\"cache-first\"),Object(S.__assign)(Object(S.__assign)({},t),{displayName:e,context:t.context,metadata:{reactComponent:{displayName:e}}})},e.prototype.initializeObservableQuery=function(){var t,e;if(this.ssrInitiated()&&(this.currentObservable.query=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable.query){var r=this.prepareObservableQueryOptions();this.previousData.observableQueryOptions=Object(S.__assign)(Object(S.__assign)({},r),{children:null}),this.currentObservable.query=this.refreshClient().client.watchQuery(Object(S.__assign)({},r)),this.ssrInitiated()&&(null===(e=null===(t=this.context)||void 0===t?void 0:t.renderPromises)||void 0===e||e.registerSSRObservable(this.currentObservable.query,r))}},e.prototype.updateObservableQuery=function(){if(this.currentObservable.query){var t=Object(S.__assign)(Object(S.__assign)({},this.prepareObservableQueryOptions()),{children:null});Object(P.a)(t,this.previousData.observableQueryOptions)||(this.previousData.observableQueryOptions=t,this.currentObservable.query.setOptions(t).catch((function(){})))}else this.initializeObservableQuery()},e.prototype.startQuerySubscription=function(){var t=this;if(!this.currentObservable.subscription&&!this.getOptions().skip){var e=this.currentObservable.query;this.currentObservable.subscription=e.subscribe({next:function(e){var r=e.loading,n=e.networkStatus,i=e.data,s=t.previousData.result;s&&s.loading===r&&s.networkStatus===n&&Object(P.a)(s.data,i)||t.onNewData()},error:function(e){if(t.resubscribeToQuery(),!e.hasOwnProperty(\"graphQLErrors\"))throw e;var r=t.previousData.result;(r&&r.loading||!Object(P.a)(e,t.previousData.error))&&(t.previousData.error=e,t.onNewData())}})}},e.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var t=this.currentObservable.query.getLastError(),e=this.currentObservable.query.getLastResult();this.currentObservable.query.resetLastResults(),this.startQuerySubscription(),Object.assign(this.currentObservable.query,{lastError:t,lastResult:e})},e.prototype.getQueryResult=function(){var t=this.observableQueryFields(),e=this.getOptions();if(e.skip)t=Object(S.__assign)(Object(S.__assign)({},t),{data:void 0,error:void 0,loading:!1,called:!0});else{var r=this.currentObservable.query.getCurrentResult(),n=r.loading,i=r.partial,s=r.networkStatus,o=r.errors,a=r.error,u=r.data;if(o&&o.length>0&&(a=new x.a({graphQLErrors:o})),t=Object(S.__assign)(Object(S.__assign)({},t),{loading:n,networkStatus:s,error:a,called:!0}),n){var c=this.previousData.result&&this.previousData.result.data;t.data=c&&u?Object(S.__assign)(Object(S.__assign)({},c),u):c||u}else if(a)Object.assign(t,{data:(this.currentObservable.query.getLastResult()||{}).data});else{var l=this.currentObservable.query.options.fetchPolicy;if(e.partialRefetch&&!u&&i&&\"cache-only\"!==l)return Object.assign(t,{loading:!0,networkStatus:x.b.loading}),t.refetch(),t;t.data=u}}return t.client=this.client,this.previousData.loading=this.previousData.result&&this.previousData.result.loading||!1,this.previousData.result=t,this.currentObservable.query&&this.currentObservable.query.resetQueryStoreErrors(),t},e.prototype.handleErrorOrCompleted=function(){if(this.currentObservable.query&&this.previousData.result){var t=this.previousData.result,e=t.data,r=t.loading,n=t.error;if(!r){var i=this.getOptions(),s=i.query,o=i.variables,a=i.onCompleted,u=i.onError;if(this.previousOptions&&!this.previousData.loading&&Object(P.a)(this.previousOptions.query,s)&&Object(P.a)(this.previousOptions.variables,o))return;a&&!n?a(e):u&&n&&u(n)}}},e.prototype.removeQuerySubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)},e.prototype.observableQueryFields=function(){return{variables:this.currentObservable.query.variables,refetch:this.obsRefetch,fetchMore:this.obsFetchMore,updateQuery:this.obsUpdateQuery,startPolling:this.obsStartPolling,stopPolling:this.obsStopPolling,subscribeToMore:this.obsSubscribeToMore}},e}(w);function Q(t,e,r){void 0===r&&(r=!1);var n=Object(h.useContext)(Object(_.c)()),i=Object(h.useReducer)((function(t){return t+1}),0),s=i[0],o=i[1],a=e?Object(S.__assign)(Object(S.__assign)({},e),{query:t}):{query:t},u=Object(h.useRef)(),c=u.current||new D({options:a,context:n,onNewData:function(){c.ssrInitiated()?o():Promise.resolve().then(o)}});c.setOptions(a),c.context=n,c.ssrInitiated()&&!u.current&&(u.current=c);var l=function(t,e){var r=Object(h.useRef)();return r.current&&Object(P.a)(e,r.current.key)||(r.current={key:e,value:t()}),r.current.value}((function(){return r?c.executeLazy():c.execute()}),{options:Object(S.__assign)(Object(S.__assign)({},a),{onError:void 0,onCompleted:void 0}),context:n,tick:s}),p=r?l[1]:l;return Object(h.useEffect)((function(){return u.current||(u.current=c),function(){return c.cleanup()}}),[]),Object(h.useEffect)((function(){return c.afterExecute({lazy:r})}),[p.loading,p.networkStatus,p.error,p.data]),l}var k=function(t){function e(e){var r=e.options,n=e.context,i=e.result,s=e.setResult,o=t.call(this,r,n)||this;return o.runMutation=function(t){void 0===t&&(t={}),o.onMutationStart();var e=o.generateNewMutationId();return o.mutate(t).then((function(t){return o.onMutationCompleted(t,e),t})).catch((function(t){if(o.onMutationError(t,e),!o.getOptions().onError)throw t}))},o.verifyDocumentType(r.mutation,_.b.Mutation),o.result=i,o.setResult=s,o.mostRecentMutationId=0,o}return Object(S.__extends)(e,t),e.prototype.execute=function(t){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,_.b.Mutation),t.client=this.refreshClient().client,[this.runMutation,t]},e.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},e.prototype.cleanup=function(){},e.prototype.mutate=function(t){var e=this.getOptions(),r=e.mutation,n=e.variables,i=e.optimisticResponse,s=e.update,o=e.context,a=void 0===o?{}:o,u=e.awaitRefetchQueries,c=void 0!==u&&u,l=e.fetchPolicy,p=Object(S.__assign)({},t),b=Object.assign({},n,p.variables);return delete p.variables,this.refreshClient().client.mutate(Object(S.__assign)({mutation:r,optimisticResponse:i,refetchQueries:p.refetchQueries||this.getOptions().refetchQueries,awaitRefetchQueries:c,update:s,context:a,fetchPolicy:l,variables:b},p))},e.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},e.prototype.onMutationCompleted=function(t,e){var r=this.getOptions(),n=r.onCompleted,i=r.ignoreResults,s=t.data,o=t.errors,a=o&&o.length>0?new x.a({graphQLErrors:o}):void 0;this.isMostRecentMutation(e)&&!i&&this.updateResult({called:!0,loading:!1,data:s,error:a}),n&&n(s)},e.prototype.onMutationError=function(t,e){var r=this.getOptions().onError;this.isMostRecentMutation(e)&&this.updateResult({loading:!1,error:t,data:void 0,called:!0}),r&&r(t)},e.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},e.prototype.isMostRecentMutation=function(t){return this.mostRecentMutationId===t},e.prototype.updateResult=function(t){!this.isMounted||this.previousResult&&Object(P.a)(this.previousResult,t)||(this.setResult(t),this.previousResult=t)},e}(w);var M=function(t){function e(e){var r=e.options,n=e.context,i=e.setResult,s=t.call(this,r,n)||this;return s.currentObservable={},s.setResult=i,s.initialize(r),s}return Object(S.__extends)(e,t),e.prototype.execute=function(t){if(!0===this.getOptions().skip)return this.cleanup(),{loading:!1,error:void 0,data:void 0,variables:this.getOptions().variables};var e=t;this.refreshClient().isNew&&(e=this.getLoadingResult());var r=this.getOptions().shouldResubscribe;return\"function\"===typeof r&&(r=!!r(this.getOptions())),!1!==r&&this.previousOptions&&Object.keys(this.previousOptions).length>0&&(this.previousOptions.subscription!==this.getOptions().subscription||!Object(P.a)(this.previousOptions.variables,this.getOptions().variables)||this.previousOptions.skip!==this.getOptions().skip)&&(this.cleanup(),e=this.getLoadingResult()),this.initialize(this.getOptions()),this.startSubscription(),this.previousOptions=this.getOptions(),Object(S.__assign)(Object(S.__assign)({},e),{variables:this.getOptions().variables})},e.prototype.afterExecute=function(){this.isMounted=!0},e.prototype.cleanup=function(){this.endSubscription(),delete this.currentObservable.query},e.prototype.initialize=function(t){this.currentObservable.query||!0===this.getOptions().skip||(this.currentObservable.query=this.refreshClient().client.subscribe({query:t.subscription,variables:t.variables,fetchPolicy:t.fetchPolicy}))},e.prototype.startSubscription=function(){this.currentObservable.subscription||(this.currentObservable.subscription=this.currentObservable.query.subscribe({next:this.updateCurrentData.bind(this),error:this.updateError.bind(this),complete:this.completeSubscription.bind(this)}))},e.prototype.getLoadingResult=function(){return{loading:!0,error:void 0,data:void 0}},e.prototype.updateResult=function(t){this.isMounted&&this.setResult(t)},e.prototype.updateCurrentData=function(t){var e=this.getOptions().onSubscriptionData;this.updateResult({data:t.data,loading:!1,error:void 0}),e&&e({client:this.refreshClient().client,subscriptionData:t})},e.prototype.updateError=function(t){this.updateResult({error:t,loading:!1})},e.prototype.completeSubscription=function(){var t=this.getOptions().onSubscriptionComplete;t&&t(),this.endSubscription()},e.prototype.endSubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)},e}(w);!function(){function t(){this.queryPromises=new Map,this.queryInfoTrie=new Map}t.prototype.registerSSRObservable=function(t,e){this.lookupQueryInfo(e).observable=t},t.prototype.getSSRObservable=function(t){return this.lookupQueryInfo(t).observable},t.prototype.addQueryPromise=function(t,e){return this.lookupQueryInfo(t.getOptions()).seen?e():(this.queryPromises.set(t.getOptions(),new Promise((function(e){e(t.fetchData())}))),null)},t.prototype.hasPromises=function(){return this.queryPromises.size>0},t.prototype.consumeAndAwaitPromises=function(){var t=this,e=[];return this.queryPromises.forEach((function(r,n){t.lookupQueryInfo(n).seen=!0,e.push(r)})),this.queryPromises.clear(),Promise.all(e)},t.prototype.lookupQueryInfo=function(t){var e=this.queryInfoTrie,r=t.query,n=t.variables,i=e.get(r)||new Map;e.has(r)||e.set(r,i);var s=JSON.stringify(n),o=i.get(s)||{seen:!1,observable:null};return i.has(s)||i.set(s,o),o}}();var C=r(\"17x9\"),T=r.n(C);function E(t){var e=t.children,r=function(t,e){return Q(t,e,!1)}(t.query,Object(S.__rest)(t,[\"children\",\"query\"]));return e&&r?e(r):null}function I(t){var e=function(t,e){var r=Object(h.useContext)(Object(_.c)()),n=Object(h.useState)({called:!1,loading:!1}),i=n[0],s=n[1],o=e?Object(S.__assign)(Object(S.__assign)({},e),{mutation:t}):{mutation:t},a=Object(h.useRef)(),u=(a.current||(a.current=new k({options:o,context:r,result:i,setResult:s})),a.current);return u.setOptions(o),u.context=r,Object(h.useEffect)((function(){return u.afterExecute()})),u.execute(i)}(t.mutation,t),r=e[0],n=e[1];return t.children?t.children(r,n):null}function L(t){var e=function(t,e){var r=Object(h.useContext)(Object(_.c)()),n=e?Object(S.__assign)(Object(S.__assign)({},e),{subscription:t}):{subscription:t},i=Object(h.useState)({loading:!n.skip,error:void 0,data:void 0}),s=i[0],o=i[1],a=Object(h.useRef)(),u=(a.current||(a.current=new M({options:n,context:r,setResult:o})),a.current);return u.setOptions(n,!0),u.context=r,Object(h.useEffect)((function(){return u.afterExecute()})),Object(h.useEffect)((function(){return u.cleanup.bind(u)}),[]),u.execute(s)}(t.subscription,t);return t.children&&e?t.children(e):null}(E||(E={})).propTypes={client:T.a.object,children:T.a.func.isRequired,fetchPolicy:T.a.string,notifyOnNetworkStatusChange:T.a.bool,onCompleted:T.a.func,onError:T.a.func,pollInterval:T.a.number,query:T.a.object.isRequired,variables:T.a.object,ssr:T.a.bool,partialRefetch:T.a.bool,returnPartialData:T.a.bool},(I||(I={})).propTypes={mutation:T.a.object.isRequired,variables:T.a.object,optimisticResponse:T.a.oneOfType([T.a.object,T.a.func]),refetchQueries:T.a.oneOfType([T.a.arrayOf(T.a.oneOfType([T.a.string,T.a.object])),T.a.func]),awaitRefetchQueries:T.a.bool,update:T.a.func,children:T.a.func.isRequired,onCompleted:T.a.func,onError:T.a.func,fetchPolicy:T.a.string},(L||(L={})).propTypes={subscription:T.a.object.isRequired,variables:T.a.object,children:T.a.func,onSubscriptionData:T.a.func,onSubscriptionComplete:T.a.func,shouldResubscribe:T.a.oneOfType([T.a.func,T.a.bool])};var z=r(\"hrij\"),N=d.a.createElement;function A(){var t=n([\"\\n  query getProducts($id: [ID!]!) {\\n    nodes(ids: $id) {\\n      ... on Product {\\n        title\\n        descriptionHtml\\n        id\\n        variants(first:4){\\n          edges{\\n            node{\\n              compareAtPrice\\n              price\\n              title\\n            }\\n          }\\n        }\\n        images(first: 10) {\\n          edges {\\n            node {\\n              originalSrc\\n              altText\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\"]);return A=function(){return t},t}function B(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var U=function(t){Object(c.a)(n,t);var e,r=(e=n,function(){var t,r=Object(p.a)(e);if(B()){var n=Object(p.a)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(l.a)(this,t)});function n(){var t;Object(o.a)(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=r.call.apply(r,[this].concat(i)),Object(b.a)(Object(u.a)(t),\"state\",{updating:{}}),Object(b.a)(Object(u.a)(t),\"handleUpload\",(function(e,r){var n=t.state.updating;n[e]=!0,t.setState({updating:n})})),Object(b.a)(Object(u.a)(t),\"postProductToDB\",(function(e){O.a.patch(\"/api/products\",{product:e},{headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({updating:{}}),e.next=3,s.a.awrap(t.props.fetchProducts());case 3:case\"end\":return e.stop()}}),null,null,null,Promise)})).catch((function(t){alert(\"Something went wrong, plase refresh page.\")}))})),t}return Object(a.a)(n,[{key:\"render\",value:function(){var t=this,e=this.context;return N(f.c,null,N(f.j,{showHeader:!0,resourceName:{singular:\"Product\",plural:\"Products\"},items:this.props.products,renderItem:function(r,n,i){var s=!1;r.streetAddress&&r.city&&r.email&&r.zipCode&&r.state&&r.businessName&&r.merchantDescription&&(s=!0);var o=N(f.p,{source:r.images[0]?r.images[0].originalSrc:\"\",alt:r.images[0]?r.images[0].altText:\"\"});return N(f.j.Item,{id:r.id,media:o,accessibilityLabel:\"View details for \".concat(r.title),onClick:function(){}},N(f.l,null,N(f.l.Item,{fill:!0},N(\"h3\",null,\" \",N(f.o,{variation:\"strong\"},\" \",r.title,\" \"),\" \")),N(f.l.Item,null,t.state.updating[r.id]?N(E,{query:J,variables:{id:[r.id]}},(function(e){var n=e.data,i=(e.loading,e.error);return i?N(f.o,null,i.message):(n&&t.postProductToDB(n.nodes[0]),N(f.b,{loading:t.state.updating[r.id],primary:!0},\"Update Item\"))})):N(f.e,{onSubmit:function(){return t.handleUpload(r.id,i)},preventDefault:!0},N(f.b,{loading:!1,submit:!0,primary:!0},\"Update Item\"))),N(f.l.Item,null,\"\\xa0 \",r.redeemedTotal,\"/\",r.transactionTotal,\" \\xa0\"),N(f.l.Item,null,N(\"div\",{style:{color:s?\"green\":\"red\"}},N(f.b,{monochrome:!0,outline:!0,onClick:function(){m.a.set(\"product\",r),z.Redirect.create(e).dispatch(z.Redirect.Action.APP,\"/edit-products\")}},s?\" Complete \":\"Incomplete\",\" \")))))}}))}}]),n}(d.a.Component);Object(b.a)(U,\"contextType\",v.Context);var F=U,J=R()(A()),V=d.a.createElement;function $(){var t=n([\"\\n  query getProducts($ids: [ID!]!) {\\n    nodes(ids: $ids) {\\n      ... on Product {\\n        title\\n        descriptionHtml\\n        id\\n        variants(first:4){\\n          edges{\\n            node{\\n              compareAtPrice\\n              price\\n              title\\n            }\\n          }\\n        }\\n        images(first: 10) {\\n          edges {\\n            node {\\n              originalSrc\\n              altText\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\"]);return $=function(){return t},t}function G(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var H=function(t){Object(c.a)(n,t);var e,r=(e=n,function(){var t,r=Object(p.a)(e);if(G()){var n=Object(p.a)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(l.a)(this,t)});function n(){var t;Object(o.a)(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=r.call.apply(r,[this].concat(i)),Object(b.a)(Object(u.a)(t),\"state\",{open:!1,loadingDB:!0,products:[],productIDs:null}),Object(b.a)(Object(u.a)(t),\"postNewProductsToDB\",(function(e){O.a.post(\"/api/products\",{products:e.nodes},{headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(t.fetchProducts());case 2:t.setState({productIDs:null});case 3:case\"end\":return e.stop()}}),null,null,null,Promise)})).catch((function(t){alert(\"Failed To Update Database, Please Try Again.\")}))})),Object(b.a)(Object(u.a)(t),\"handleSelection\",(function(e){var r;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.selection.map((function(t){return t.id})),t.setState({open:!1,productIDs:r});case 2:case\"end\":return n.stop()}}),null,null,null,Promise)})),Object(b.a)(Object(u.a)(t),\"fetchProducts\",(function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(fetch(\"/api/products\").then((function(t){return t.json()})).then((function(e){return t.setState({products:e.data,loadingDB:!1}),!0})).catch((function(t){return alert(t),null})));case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}}),null,null,null,Promise)})),t}return Object(a.a)(n,[{key:\"componentDidMount\",value:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetchProducts();case 1:case\"end\":return t.stop()}}),null,this,null,Promise)}},{key:\"render\",value:function(){var t=this,e=0===this.state.products.length,r=this.state,n=r.loadingDB,i=r.productIDs;return n?V(f.i,null,V(f.h,null,V(f.d,{centeredLayout:!0,heading:\"Fetching Products from Database...\"},V(f.k,{accessibilityLabel:\"Spinner\",size:\"large\",color:\"inkLightest\"})))):i?V(f.i,null,V(f.h,null,V(f.d,{centeredLayout:!0,heading:\"Adding Specified Products to Database...\"},V(E,{query:X,variables:{ids:i}},(function(e){var r=e.data,n=e.loading,i=e.error;return n?V(f.k,{accessibilityLabel:\"Spinner\",size:\"large\",color:\"inkLightest\"}):i?V(\"div\",null,i.message):(t.postNewProductsToDB(r),V(f.k,{accessibilityLabel:\"Spinner\",size:\"large\",color:\"inkLightest\"}))}))))):V(f.i,null,V(v.TitleBar,{primaryAction:{content:\"Select services\",onAction:function(){return t.setState({open:!0})}}}),V(v.ResourcePicker,{resourceType:\"Product\",showVariants:!1,open:this.state.open,onSelection:function(e){return t.handleSelection(e)},onCancel:function(){return t.setState({open:!1})}}),e?V(f.h,null,V(f.d,{heading:\"Send Vouchers to your customers to be redeemed in-store.\",action:{content:\"Select Services\",onAction:function(){return t.setState({open:!0})}},image:\"https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg\"},V(\"p\",null,\"Select products/services for which to send vouchers to customers via email.\"))):V(F,{fetchProducts:this.fetchProducts,products:this.state.products}))}}]),n}(d.a.Component),X=(e.default=H,R()($()))},\"m0L+\":function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return r(\"RNiq\")}])}},[[\"m0L+\",1,2,3,0,4,7,5]]]);","extractedComments":[]}