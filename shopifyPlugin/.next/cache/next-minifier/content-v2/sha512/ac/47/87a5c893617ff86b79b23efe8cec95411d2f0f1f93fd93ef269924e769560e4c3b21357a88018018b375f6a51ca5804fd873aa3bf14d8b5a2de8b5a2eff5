{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{LcDk:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/edit-products\",function(){return r(\"iDIr\")}])},iDIr:function(e,t,r){\"use strict\";r.r(t);var n=r(\"o0o1\"),a=r.n(n),i=r(\"1OyB\"),s=r(\"vuIU\"),o=r(\"JX7q\"),c=r(\"Ji7U\"),l=r(\"md7G\"),u=r(\"foSv\"),d=r(\"rePB\"),h=r(\"q1tI\"),p=r.n(h),m=r(\"6mVS\"),f=r(\"2GyB\"),g=r.n(f),y=r(\"vDqi\"),b=r.n(y),C=r(\"hrij\"),v=r(\"p7gN\"),O=p.a.createElement;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){Object(c.a)(n,e);var t,r=(t=n,function(){var e,r=Object(u.a)(t);if(x()){var n=Object(u.a)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Object(l.a)(this,e)});function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return e=r.call.apply(r,[this].concat(s)),Object(d.a)(Object(o.a)(e),\"state\",{businessName:\"\",streetAddress:\"\",city:\"\",zipCode:\"\",state:\"\",merchantDescription:\"\",email:\"\",errorCheck:!1,primaryLoad:!1,secondaryLoad:!1,showToast:!1,status:!0}),Object(d.a)(Object(o.a)(e),\"handleChange\",(function(t){return function(r){return e.setState(Object(d.a)({},t,r))}})),Object(d.a)(Object(o.a)(e),\"handleSubmit\",(function(t){var r,n,i,s,o,c,l,u;return a.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.setState({errorCheck:!0}),r=e.state,n=r.businessName,i=r.streetAddress,s=r.city,o=r.zipCode,c=r.state,l=r.merchantDescription,u=r.email,n=n.trim(),i=i.trim(),l=l.trim(),s=s.trim(),c=c.trim(),n.length&&i.length&&s.length&&c.length&&l.length&&o&&u.length&&(e.setState({primaryLoad:!0}),b.a.post(\"/api/map\",{streetAddress:i,city:s,zipCode:o,state:c}).then((function(r){var a=r.data.coords,d=a.lat,h=a.lng;if(!d&&!h)return alert(\"Address did not return a lat/lng. Please edit the addess format.\"),void e.setState({primaryLoad:!1});var p=w({},t,{businessName:n,streetAddress:i,merchantDescription:l,city:s,state:c,zipCode:o,email:u,coords:{lat:d,lng:h}});b.a.put(\"/api/products\",{product:p}).then((function(t){e.setState({showToast:!0,status:!0}),C.Redirect.create(e.context).dispatch(C.Redirect.Action.APP,\"/index\")})).catch((function(t){e.setState({showToast:!0,status:!1,primaryLoad:!1})}))})).catch((function(e){console.log(e),alert(\"Address did not return a lat/lng. Please edit the addess format.\")})));case 8:case\"end\":return a.stop()}}),null,null,null,Promise)})),e}return Object(s.a)(n,[{key:\"componentDidMount\",value:function(){var e=g.a.get(\"product\");this.setState({businessName:e.businessName?e.businessName:\"\",streetAddress:e.streetAddress?e.streetAddress:\"\",city:e.city?e.city:\"\",zipCode:e.zipCode?e.zipCode:\"\",state:e.state?e.state:\"\",merchantDescription:e.merchantDescription?e.merchantDescription:\"\",email:e.email?e.email:\"\"})}},{key:\"render\",value:function(){var e,t=this,r=this.context,n=this.state,a=n.errorCheck,i=n.businessName,s=n.streetAddress,o=n.city,c=n.zipCode,l=n.status,u=n.state,h=n.merchantDescription,p=n.email,f=n.primaryLoad,y=n.secondaryLoad,b=n.showToast;i=i.trim(),s=s.trim(),p=p.trim(),h=h.trim(),o=o.trim(),u=u.trim();var v=g.a.get(\"product\");return O(m.g,null,O(m.i,null,O(m.g,null,O(m.h,null,O(m.h.Section,null,b&&O(m.q,{content:l?\"Successfully uploaded.\":\"Failed To Upload, Please Try Again.\",onDismiss:function(){return t.setState({showToast:!1})}}),O(m.e,{preventDefault:!0},O(m.c,{sectioned:!0,title:\"Voucher Display Form: \".concat(v?v.title:\"\"),secondaryFooterActions:[{content:\"Return To List\",onAction:function(){t.setState({secondaryLoad:!0}),C.Redirect.create(r).dispatch(C.Redirect.Action.APP,\"/index\")},loading:y}],primaryFooterAction:{content:\"Save\",onAction:function(){t.handleSubmit(v)},loading:f}},O(m.o,{variation:\"subdued\"},\"Fill in the data below for the merchant corresponding to this product.\"),\" \",O(\"br\",null),O(\"br\",null),O(m.f,null,O(m.n,{autoFocus:!0,prefix:\"\",value:this.state.businessName,onChange:this.handleChange(\"businessName\"),label:\"Merchant's Name \\u2013 As displayed in Google Maps\",type:\"text\",placeholder:\"Bob's Burger Shack\",maxLength:150,error:a&&!i.length?\"Merchant's name is required.\":null}),O(m.n,{error:a&&!h.length?\"Merchant description is required.\":null,prefix:\"\",value:this.state.merchantDescription,onChange:this.handleChange(\"merchantDescription\"),label:\"Merchant Description\",type:\"text\",maxLength:800,showCharacterCount:!0,spellCheck:!0,multiline:!0,placeholder:\"Bob's Burger Shack is a gourmet dine-in restaurant located in the Financial District of Downtown Seattle. They're known for...\"}),O(m.n,{error:a&&!p.length?\"Email to customer is required.\":null,prefix:\"\",value:this.state.email,onChange:this.handleChange(\"email\"),label:\"Email\",type:\"text\",maxLength:800,showCharacterCount:!0,spellCheck:!0,multiline:!0,placeholder:\"Thank you for your purchase! Enjoy!\"}),O(m.m,null,\"Address\"),O(m.f.Group,{condensed:!0},O(m.n,{error:a&&!s.length?\"Street address is required.\":null,maxLength:75,prefix:\"\",value:this.state.streetAddress,onChange:this.handleChange(\"streetAddress\"),label:\"Street Address\",type:\"text\",placeholder:\"48185 Washington Blvd.\"}),O(m.n,(e={error:a&&!o.length?\"City name is required.\":null,maxLength:50,prefix:\"\",value:this.state.city,onChange:this.handleChange(\"city\"),label:\"City\",type:\"text\"},Object(d.a)(e,\"label\",\"City\"),Object(d.a)(e,\"placeholder\",\"Seattle\"),e)),O(m.n,{error:a&&!c?\"Zip code is required.\":null,maxLength:5,prefix:\"\",label:\"Zip Code\",value:this.state.zipCode,onChange:this.handleChange(\"zipCode\"),placeholder:\"90210\",type:\"number\"}),O(m.n,{error:a&&!u.length?\"State is required.\":null,maxLength:2,prefix:\"\",label:\"State\",value:this.state.state,onChange:this.handleChange(\"state\"),placeholder:\"WA\"}))))))))))}}]),n}(p.a.Component);Object(d.a)(D,\"contextType\",v.Context),t.default=D}},[[\"LcDk\",1,2,3,0,4,5]]]);","extractedComments":[]}